<template id="visualization-settings-template">
  <link rel="stylesheet" href="settings.css">

  <div id="settings-root">
    <div class="settings-panel">
      <div class="setting">
        <label for="circleFontSize">Font size for circle text</label>
        <input type="range" class="menu-slider" id="circleFontSize" value="12" min="8" max="50">
      </div>
      <div class="setting">
        <label for="circlePadding">Padding between circles</label>
        <input type="range" class="menu-slider" id="circlePadding" value="10" min="0" max="50">
      </div>
    </div>
  </div>
</template>

<script>
  (function () {
    const webComponents = require('web-component-infrastructure');
    let circleFontSizeInput;
    let circlePaddingInput;
    let onChanged;

    webComponents.defineCustomElement('visualization-settings', class extends HTMLElement {
      postConnected() {
        circleFontSizeInput = this.shadowRoot.querySelector('#circleFontSize');
        circlePaddingInput = this.shadowRoot.querySelector('#circlePadding');

        const onOneValueChanged = () => onChanged(circleFontSizeInput.value, circlePaddingInput.value);
        circleFontSizeInput.oninput = onOneValueChanged;
        circlePaddingInput.oninput = onOneValueChanged;
      }

      initialize(settingsInit) {
        circleFontSizeInput.value = settingsInit.initialCircleFontSize;
        circlePaddingInput.value = settingsInit.initialCirclePadding;
      }

      onSettingsChanged(newOnChanged) {
        onChanged = newOnChanged;
      }
    });
  })();
</script>