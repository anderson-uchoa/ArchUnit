<template id="template-menu">
  <link rel="stylesheet" href="menu.css">

  <div class="tabs">
    <div id="filter" class="tab first">
      <div id="filterTab" class="tabcontent">
        <visualization-filter id="filter-menu"></visualization-filter>
      </div>
      <div class="title">Filter</div>
    </div>
    <div id="settings" class="tab second">
      <div id="settingsTab" class="tabcontent">
        <visualization-settings id='settings-menu'></visualization-settings>
      </div>
      <div class="title">Settings</div>
    </div>
    <div id="legend" class="tab third">
      <div id="legendTab" class="tabcontent">
        <p>??</p>
      </div>
      <div class="title">?</div>
    </div>
  </div>
</template>

<script>
  let menuVars = {
    shadowRoot: undefined,
    currentDocument: document.currentScript ? document.currentScript.ownerDocument : document._currentScript.ownerDocument
  };

  class VisualizationMenu extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      menuVars.shadowRoot = this.attachShadow({mode: 'open'});
      let template = menuVars.currentDocument.querySelector('#template-menu');
      menuVars.shadowRoot.appendChild(template.content.cloneNode(true));
    }

    initializeSettings(cssSheet, onSettingsChanged) {
      menuVars.shadowRoot.querySelector('#settings-menu').initialize(cssSheet, onSettingsChanged);
    }

    initializeFilter(onClassFilterChanged, onDependenciesFilterChanged) {
      menuVars.shadowRoot.querySelector('#filter-menu').initialize(onClassFilterChanged, onDependenciesFilterChanged);
    }
  }

  window.customElements.define('visualization-menu', VisualizationMenu);
</script>